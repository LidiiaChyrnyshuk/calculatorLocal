{"mappings":"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","sources":["js/modal.js"],"sourcesContent":["const refsModal = {\r\n\topenModalBtn: document.querySelector(\"[data-modal-open]\"),\r\n\tbackdrop: document.querySelector(\"[data-modal]\"),\r\n\tform: document.getElementById(\"registrationForm\"),\r\n\temailInput: document.querySelector(\"input[name='email']\"),\r\n\tpasswordInput: document.querySelector(\"input[name='password']\"),\r\n\tcheckbox: document.querySelector(\"input[name='terms']\"),\r\n\tsubmitBtn: document.querySelector(\".modal button[type='submit']\"),\r\n};\r\n\r\nlet startY;\r\n\r\nrefsModal.openModalBtn.addEventListener(\"click\", handleOpenModal);\r\n\r\nrefsModal.emailInput.addEventListener(\"input\", validateForm);\r\nrefsModal.passwordInput.addEventListener(\"input\", validateForm);\r\nrefsModal.checkbox.addEventListener(\"change\", validateForm);\r\nrefsModal.form.addEventListener(\"touchstart\", handleTouchStart);\r\nrefsModal.form.addEventListener(\"touchmove\", handleTouchMove);\r\nrefsModal.form.addEventListener(\"submit\", submitRegistration);\r\n\r\nwindow.addEventListener(\"popstate\", handleBackButton);\r\n\r\ndisableButton();\r\n\r\nfunction handleOpenModal() {\r\n\trefsModal.backdrop.classList.remove(\"is-hidden\");\r\n\tdocument.addEventListener(\"keydown\", handleEscCloseModal);\r\n\tdocument.addEventListener(\"click\", handleEscCloseModal);\r\n\tdocument.body.style.overflow = \"hidden\";\r\n\twindow.history.pushState({ modalOpen: true }, \"\");\r\n}\r\n\r\nfunction handleCloseModal() {\r\n\tdocument.body.style.overflow = \"\";\r\n\trefsModal.backdrop.classList.add(\"is-hidden\");\r\n\tdocument.removeEventListener(\"keydown\", handleEscCloseModal);\r\n\tdocument.removeEventListener(\"click\", handleEscCloseModal);\r\n\tclearForm();\r\n\r\n\tif (window.history.state && window.history.state.modalOpen) {\r\n\t\twindow.history.back();\r\n\t}\r\n}\r\n\r\nfunction handleEscCloseModal(event) {\r\n\tif (\r\n\t\tevent.target === refsModal.backdrop ||\r\n\t\t(event.type === \"keydown\" && event.key === \"Escape\")\r\n\t) {\r\n\t\thandleCloseModal();\r\n\t}\r\n}\r\n\r\nfunction handleTouchStart(event) {\r\n\tstartY = event.touches[0].clientY;\r\n}\r\n\r\nfunction handleTouchMove(event) {\r\n\tlet deltaY = event.touches[0].clientY - startY;\r\n\tif (deltaY > 100) {\r\n\t\thandleCloseModal();\r\n\t}\r\n}\r\n\r\nfunction handleBackButton() {\r\n\tif (!refsModal.backdrop.classList.contains(\"is-hidden\")) {\r\n\t\thandleCloseModal();\r\n\t}\r\n}\r\n\r\nfunction validateEmail(email) {\r\n\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\treturn emailRegex.test(email);\r\n}\r\n\r\nfunction validatePassword(password) {\r\n\treturn password.length >= 6;\r\n}\r\n\r\nfunction validateField(input, validationFn) {\r\n\tconst isValid = validationFn(input.value.trim());\r\n\tif (input.value.trim() === \"\") {\r\n\t\tinput.classList.remove(\"valid\", \"invalid\");\r\n\t} else {\r\n\t\tinput.classList.toggle(\"valid\", isValid);\r\n\t\tinput.classList.toggle(\"invalid\", !isValid);\r\n\t}\r\n\treturn isValid;\r\n}\r\n\r\nfunction validateForm() {\r\n\tconst emailValid = validateField(refsModal.emailInput, validateEmail);\r\n\tconst passwordValid = validateField(\r\n\t\trefsModal.passwordInput,\r\n\t\tvalidatePassword\r\n\t);\r\n\tconst isChecked = refsModal.checkbox.checked;\r\n\r\n\t// Замість перевірки токена:\r\n\tconst captchaResponse = document.querySelector(\r\n\t\t\"textarea[name='g-recaptcha-response']\"\r\n\t);\r\n\tconst captchaReady = captchaResponse && captchaResponse.value.trim() !== \"\";\r\n\r\n\tif (emailValid && passwordValid && isChecked && captchaReady) {\r\n\t\tenableButton();\r\n\t} else {\r\n\t\tdisableButton();\r\n\t}\r\n}\r\n\r\n\r\nfunction clearForm() {\r\n\trefsModal.emailInput.value = \"\";\r\n\trefsModal.passwordInput.value = \"\";\r\n\trefsModal.emailInput.classList.remove(\"valid\", \"invalid\");\r\n\trefsModal.passwordInput.classList.remove(\"valid\", \"invalid\");\r\n\trefsModal.checkbox.checked = false;\r\n\tdisableButton();\r\n}\r\n\r\nfunction disableButton() {\r\n\trefsModal.submitBtn.disabled = true;\r\n\trefsModal.submitBtn.style.cursor = \"not-allowed\";\r\n\trefsModal.submitBtn.style.background = \"rgba(99, 82, 255, 1)\";\r\n\trefsModal.submitBtn.style.color = \"rgba(198, 195, 205, 1)\";\r\n}\r\n\r\nfunction enableButton() {\r\n\trefsModal.submitBtn.disabled = false;\r\n\trefsModal.submitBtn.style.cursor = \"pointer\";\r\n\trefsModal.submitBtn.style.background = \"rgba(79, 65, 202, 1)\";\r\n\trefsModal.submitBtn.style.color = \"rgba(255, 255, 255, 1)\";\r\n}\r\n\r\nasync function submitRegistration(event) {\r\n\tevent.preventDefault();\r\n\tif (refsModal.submitBtn.disabled) return;\r\n\r\n\tconst email = refsModal.emailInput.value.trim();\r\n\tconst password = refsModal.passwordInput.value.trim();\r\n\tconst captchaResponseEl = document.querySelector(\r\n\t\t\"textarea[name='g-recaptcha-response']\"\r\n\t);\r\n\tconst captchaResponse = captchaResponseEl\r\n\t\t? captchaResponseEl.value.trim()\r\n\t\t: \"\";\r\n\r\n\tif (!email || !password || !captchaResponse) {\r\n\t\talert(\"Будь ласка, заповніть усі поля та пройдіть капчу.\");\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst data = {\r\n\t\temail,\r\n\t\tpassword,\r\n\t\tlanguage: \"ru\",\r\n\t\tpartnerId: null,\r\n\t\ttrackId: null,\r\n\t\tparam1: null,\r\n\t\tparam2: null,\r\n\t\tparam3: null,\r\n\t\tparam4: null,\r\n\t};\r\n\r\n\ttry {\r\n\t\tconst response = await fetch(\r\n\t\t\t`https://weiss.bet/api/v3/auth/register/partners?captcha-response=${captchaResponse}`,\r\n\t\t\t{\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(data),\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tconst responseData = await response.json();\r\n\r\n\t\tif (\"playerToken\" in responseData) {\r\n\t\t\tclearForm();\r\n\t\t\twindow.location.href = `https://weiss.bet/api/v3/auth/partners-player-entry?playerToken=${responseData.playerToken}&deeplink=%2F`;\r\n\t\t} else if (\"errors\" in responseData) {\r\n\t\t\tconsole.error(\"Помилки при реєстрації:\", responseData.errors);\r\n\t\t\talert(\"Помилка реєстрації. Спробуйте ще раз.\");\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Невідома відповідь від сервера.\");\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error(\"❌ Помилка при запиті:\", error);\r\n\t\talert(\"Щось пішло не так! Спробуйте ще раз.\");\r\n\t}\r\n}\r\n\r\nwindow.onCaptchaCompleted = function () {\r\n\tvalidateForm();\r\n};\r\n"],"names":[],"version":3,"file":"calculator.26d773dc.js.map","sourceRoot":"/__parcel_source_root/"}